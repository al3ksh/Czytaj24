<%- include('partials/layoutStart', {
  pageTitle: 'Sukces zamówienia',
  metaDescription: 'Zamówienie zrealizowane — zobacz historię zakupów.',
  showSearch: false,
  bodyClass: 'min-h-screen bg-slate-50 text-slate-900 dark:bg-slate-950 dark:text-slate-50',
  wrapperClass: 'min-h-screen'
}) %>

<main class="mx-auto max-w-5xl px-4 py-10">
  <section class="glass-panel p-10 text-center text-slate-900 dark:text-slate-100">
    <p class="text-xs uppercase tracking-[0.35em] text-brand">Gratulacje</p>
    <h1 class="mt-3 font-display text-3xl text-slate-900 dark:text-white">Zamówienie złożone pomyślnie</h1>
    <p class="mt-4 text-sm text-slate-600 dark:text-slate-300">
      Twoje zamówienie zostało przyjęte do realizacji. Szczegóły zamówienia znajdziesz w historii zamówień.
    </p>
    <div class="mt-6 flex flex-wrap justify-center gap-4">
      <a
        href="/orders"
        class="rounded-full bg-brand px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow shadow-orange-500/40 transition hover:bg-brand-dark focus:outline-none focus:ring-2 focus:ring-brand focus:ring-offset-2"
      >
        Moje zamówienia
      </a>
      <a
        href="/"
        class="rounded-full border border-slate-200 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-slate-900 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-slate-800"
      >
        Wracaj na stronę główną
      </a>
    </div>
  </section>

  <% if (previousOrders && previousOrders.length > 0) { %>
    <section class="mt-10 space-y-4">
      <p class="text-xs uppercase tracking-[0.35em] text-brand">Twoje ostatnie zamówienia</p>
      <% previousOrders.forEach((order) => { %>
        <article class="glass-panel p-6 text-slate-900 dark:text-slate-100">
          <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
            <div>
              <p class="text-sm text-slate-500 dark:text-slate-400">
                Z dnia: <%= new Date(order.date).toLocaleString('pl-PL') %>
              </p>
              <h2 class="text-xl font-semibold text-slate-900 dark:text-white">
                #<%= order._id.toString().slice(-8) %>
              </h2>
            </div>
            <div class="text-right">
              <p class="text-lg font-semibold text-slate-900 dark:text-white">
                <%= (order.total || order.subtotal || 0).toFixed(2) %> PLN
              </p>
              <% if (order.deliveryCost) { %>
                <p class="text-xs text-slate-500 dark:text-slate-400">
                  w tym dostawa: <%= order.deliveryCost.toFixed(2) %> PLN
                </p>
              <% } %>
            </div>
          </div>
          <ul class="mt-4 divide-y divide-slate-200 text-sm text-slate-700 dark:divide-slate-700 dark:text-slate-300">
            <% order.items.forEach((item) => { %>
              <li class="flex items-center justify-between py-2">
                <span><%= item.title %> • x<%= item.quantity %></span>
                <span class="text-slate-900 dark:text-slate-100"><%= Number(item.price * item.quantity).toFixed(2) %> PLN</span>
              </li>
            <% }) %>
          </ul>
        </article>
      <% }) %>
    </section>
  <% } %>
</main>

<%- include('partials/layoutEnd') %>
